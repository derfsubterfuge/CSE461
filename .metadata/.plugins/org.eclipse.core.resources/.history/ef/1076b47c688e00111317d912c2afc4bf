package edu.uw.cs.cse461.sp12.OSConsoleApps.DDNS;

import edu.uw.cs.cse461.sp12.OS.NameManager;
import edu.uw.cs.cse461.sp12.OS.OSConsoleApp;

/**
 * An application that prints the contents of the naming database used by the DDNS system. 
 * @author zahorjan
 *
 */
public class DumpDB implements OSConsoleApp {

	public DumpDB() {
	}
	
	public String appname() {
		return "dumpdb";
	}
	
	public void run() {
		System.out.println("DDNS Service:");
		DDNSService ddns = (DDNSService)OS.getService("ddns");
		if ( ddns != null ) System.out.println(ddns);
		else System.out.println("Not loaded");
		
		DDNSResolverService = (DDNSResolverService)
		try {
			manager = new NameManager();
			System.out.println(manager);
		} catch (Exception e) {
			System.out.println("Caught exception: " + e.getMessage());
		}
		finally {
			if ( manager != null ) manager.discard();
		}
	}
	
	public void shutdown() {
	}

}
